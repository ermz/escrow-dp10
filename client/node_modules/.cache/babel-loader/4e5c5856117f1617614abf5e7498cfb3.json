{"ast":null,"code":"var _jsxFileName = \"/Users/edsonramirez/ChainSkills/private/escrow-dp10/client/src/App.js\";\nimport React, { Component } from 'react';\nimport Escrow from './contracts/Escrow.json';\nimport { getWeb3 } from './utils.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass App extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      web3: undefined,\n      accounts: [],\n      currentAccount: undefined,\n      contract: undefined,\n      balance: undefined\n    };\n  }\n\n  async componentDidMount() {\n    const web3 = await getWeb3();\n    const accounts = await web3.eth.getAccounts();\n    const networkId = await web3.eth.net.getId();\n    const deployedNetwork = Escrow.networkds[networkId];\n    console.log(deployedNetwork);\n    const contract = new web3.eth.Contract(Escrow.abi, deployedNetwork.address);\n    this.setState({\n      web3,\n      accounts,\n      contract\n    }, this.updateBalance);\n  }\n\n  async updateBalance() {\n    const {\n      contract\n    } = this.state;\n    const balance = await contract.methods.balanceOf().call();\n    this.setState({\n      balance\n    });\n  }\n\n  async deposit(e) {\n    e.preventDefault();\n    const {\n      contract,\n      accounts\n    } = this.state;\n    await contract.methods.deposit().send({\n      from: accounts[0],\n      value: e.target.elements[0].value\n    });\n    this.updateBalance();\n  }\n\n  async release() {\n    const {\n      contract,\n      accounts\n    } = this.state;\n    await contract.methods.release().send({\n      from: accounts[0]\n    });\n    this.updateBalance();\n  }\n\n  render() {\n    if (!this.state.web3) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"Loading...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 14\n      }, this);\n    }\n\n    const {\n      balance\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-center\",\n        children: \"Escrow\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-sm-12\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Balance: \", /*#__PURE__*/_jsxDEV(\"b\", {\n              children: balance\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 66,\n              columnNumber: 26\n            }, this), \" wei \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 14\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-sm-12\",\n          children: /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: e => this.deposit(e),\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"deposit\",\n                children: \"Deposit\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 74,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                className: \"form-control\",\n                id: \"deposit\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 75,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 73,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              className: \"btn btn-primary\",\n              children: \"Submit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 77,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-sm-12\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => this.release(),\n            type: \"submit\",\n            className: \"btn btn-primary\",\n            children: \"Release\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 14\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/edsonramirez/ChainSkills/private/escrow-dp10/client/src/App.js"],"names":["React","Component","Escrow","getWeb3","App","state","web3","undefined","accounts","currentAccount","contract","balance","componentDidMount","eth","getAccounts","networkId","net","getId","deployedNetwork","networkds","console","log","Contract","abi","address","setState","updateBalance","methods","balanceOf","call","deposit","e","preventDefault","send","from","value","target","elements","release","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Escrow from './contracts/Escrow.json';\nimport { getWeb3 } from './utils.js';\n\nclass App extends Component {\n  state = {\n    web3: undefined,\n    accounts: [],\n    currentAccount: undefined,\n    contract: undefined,\n    balance: undefined\n  }\n\n  async componentDidMount() {\n    const web3 = await getWeb3();\n    const accounts = await web3.eth.getAccounts();\n\n    const networkId = await web3.eth.net.getId();\n    const deployedNetwork = Escrow.networkds[networkId];\n    console.log(deployedNetwork);\n    const contract = new web3.eth.Contract(\n      Escrow.abi,\n      deployedNetwork.address\n    );\n\n    this.setState({ web3, accounts, contract }, this.updateBalance);\n  };\n\n  async updateBalance() {\n    const { contract } = this.state;\n    const balance = await contract.methods.balanceOf().call();\n    this.setState({ balance });\n  };\n\n  async deposit(e) {\n    e.preventDefault();\n    const { contract, accounts } = this.state;\n    await contract.methods.deposit().send({\n      from: accounts[0], \n      value: e.target.elements[0].value\n    });\n    this.updateBalance();\n  }\n\n  async release() {\n    const { contract, accounts } = this.state;\n    await contract.methods.release().send({\n      from: accounts[0], \n    });\n    this.updateBalance();\n  }\n\n  render() {\n    if (!this.state.web3) {\n      return <div>Loading...</div>;\n    }\n\n    const { balance } = this.state;\n\n    return (\n      <div className=\"container\">\n        <h1 className=\"text-center\">Escrow</h1>\n\n        <div className=\"row\">\n          <div className=\"col-sm-12\">\n             <p>Balance: <b>{balance}</b> wei </p>\n          </div>\n        </div>\n\n        <div className=\"row\">\n          <div className=\"col-sm-12\">\n            <form onSubmit={e => this.deposit(e)}>\n              <div className=\"form-group\">\n                <label htmlFor=\"deposit\">Deposit</label>\n                <input type=\"number\" className=\"form-control\" id=\"deposit\" />\n              </div>\n              <button type=\"submit\" className=\"btn btn-primary\">Submit</button>\n            </form>\n          </div>\n        </div>\n\n        <br />\n\n        <div className=\"row\">\n          <div className=\"col-sm-12\">\n             <button onClick={() => this.release()} type=\"submit\" className=\"btn btn-primary\">Release</button>\n          </div>\n        </div>\n\n      </div>\n    );\n  }\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}